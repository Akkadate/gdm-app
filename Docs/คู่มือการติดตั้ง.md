# คู่มือการติดตั้งและใช้งานแอปพลิเคชัน GDM

## ขั้นตอนการติดตั้ง

### ความต้องการของระบบ
- Node.js 16.x หรือใหม่กว่า
- PostgreSQL 14.x หรือใหม่กว่า
- Nginx (สำหรับการติดตั้งบน Production)
- Ubuntu 22.04 LTS (สำหรับเซิร์ฟเวอร์)

### 1. เตรียมฐานข้อมูล PostgreSQL

```bash
# เข้าสู่ PostgreSQL
sudo -u postgres psql

# สร้างฐานข้อมูล
CREATE DATABASE gdm_db;

# ออกจาก PostgreSQL
\q

# นำเข้าโครงสร้างฐานข้อมูล
psql -h remote.devapp.cc -U postgres -d gdm_db -f database-models.sql
```

### 2. ติดตั้ง Backend

```bash
# คัดลอกโค้ด
git clone https://github.com/yourrepo/gdm-app.git
cd gdm-app/backend

# ติดตั้ง dependencies
npm install

# สร้างไฟล์ .env
cp .env.example .env

# แก้ไขไฟล์ .env ด้วยข้อมูลที่ถูกต้อง
nano .env

# ทดสอบการทำงานของ backend
npm start
```

### 3. ติดตั้ง Frontend

```bash
# เข้าไปที่โฟลเดอร์ frontend
cd ../frontend

# ติดตั้ง dependencies
npm install

# สร้างไฟล์ .env
cp .env.example .env

# แก้ไขไฟล์ .env ด้วยข้อมูลที่ถูกต้อง
nano .env

# สร้างไฟล์สำหรับการติดตั้ง
npm run build
```

### 4. ตั้งค่า Nginx

```bash
# สร้างไฟล์คอนฟิก
sudo nano /etc/nginx/sites-available/gdmapp.conf

# คัดลอกคอนฟิกที่ให้ไว้เข้าไป

# สร้าง symlink
sudo ln -s /etc/nginx/sites-available/gdmapp.conf /etc/nginx/sites-enabled/

# ทดสอบคอนฟิก
sudo nginx -t

# รีสตาร์ท Nginx
sudo systemctl restart nginx
```

### 5. ตั้งค่า PM2 (สำหรับรัน Node.js แบบ daemon)

```bash
# ติดตั้ง PM2
sudo npm install -g pm2

# เริ่มต้นแอปพลิเคชัน
cd /path/to/gdm-app/backend
pm2 start server.js --name gdm-backend

# ตั้งค่าให้เริ่มอัตโนมัติเมื่อเซิร์ฟเวอร์รีสตาร์ท
pm2 startup
pm2 save
```

### 6. ตั้งค่า SSL ด้วย Let's Encrypt

```bash
# ติดตั้ง Certbot
sudo apt install certbot python3-certbot-nginx

# สร้าง SSL certificate
sudo certbot --nginx -d gdmapp.devapp.cc

# ตรวจสอบการต่ออายุอัตโนมัติ
sudo certbot renew --dry-run
```

## การใช้งานระบบ

### สำหรับผู้ดูแลระบบ (Admin)

1. ล็อกอินด้วยบัญชีแอดมิน (ใช้บัญชีที่กำหนดให้ตอนเริ่มต้น)
   - Username: admin
   - Password: Admin@123

2. สร้างบัญชีพยาบาล:
   - ไปที่เมนู "ผู้ใช้งาน" > "เพิ่มผู้ใช้งาน"
   - ระบุข้อมูลพยาบาล (ชื่อ, นามสกุล, เลขบัตรประชาชน, เบอร์โทร)
   - เลือกบทบาทเป็น "พยาบาล"

3. จัดการข้อมูลทั่วไปของระบบ:
   - ตั้งค่าเกณฑ์ปกติของระดับน้ำตาล
   - จัดการข้อมูลผู้ป่วยและการมอบหมายพยาบาล

### สำหรับพยาบาล

1. ล็อกอินด้วยบัญชีพยาบาล

2. ดูรายชื่อผู้ป่วยที่รับผิดชอบ:
   - หน้าแดชบอร์ดจะแสดงผู้ป่วยที่มีค่าน้ำตาลผิดปกติ
   - เมนู "รายชื่อผู้ป่วย" เพื่อดูรายชื่อผู้ป่วยทั้งหมด

3. ดูข้อมูลผู้ป่วย:
   - คลิกที่ชื่อผู้ป่วยเพื่อดูรายละเอียด
   - ดูประวัติการตรวจ, ค่าน้ำตาล, อาหาร, กิจกรรม, น้ำหนัก

4. ตั้งค่าเป้าหมายระดับน้ำตาล:
   - ไปที่หน้าข้อมูลผู้ป่วย > "ตั้งค่าเป้าหมาย"
   - กำหนดค่าต่ำสุดและสูงสุดของระดับน้ำตาลตามความเหมาะสม

5. บันทึกการรักษา:
   - ไปที่หน้าข้อมูลผู้ป่วย > "บันทึกการรักษา"
   - ระบุรายละเอียดการรักษา, คำแนะนำ, หรือการปรับยา

6. ดูรายงาน:
   - ไปที่เมนู "รายงาน"
   - เลือกประเภทรายงานที่ต้องการ (สรุปค่าน้ำตาล, ผู้ป่วยที่ควบคุมระดับน้ำตาลไม่ได้, จำนวนผู้ป่วยรายเดือน)
   - เลือกช่วงวันที่ต้องการ

### สำหรับผู้ป่วย

1. ลงทะเบียนและล็อกอิน:
   - ป้อนเลขประจำตัวผู้ป่วย, ชื่อ-นามสกุล, เบอร์โทรศัพท์, และวันเกิด
   - ตั้งรหัสผ่านสำหรับเข้าใช้งาน

2. บันทึกค่าน้ำตาลในเลือด:
   - ไปที่เมนู "บันทึกน้ำตาล"
   - ระบุวันที่, เวลา, ค่าน้ำตาล, และประเภทการตรวจ (เช่น ก่อนอาหารเช้า, หลังอาหารเช้า)
   - ระบบจะแจ้งเตือนหากค่าน้ำตาลอยู่นอกเกณฑ์ปกติ

3. บันทึกอาหาร:
   - ไปที่เมนู "บันทึกอาหาร"
   - ระบุวันที่, มื้ออาหาร, ประเภทอาหาร, และปริมาณคาร์โบไฮเดรต

4. บันทึกกิจกรรมทางกาย:
   - ไปที่เมนู "บันทึกกิจกรรม"
   - ระบุประเภทกิจกรรม, ระยะเวลา, และความเข้มข้น

5. บันทึกน้ำหนัก:
   - ไปที่เมนู "บันทึกน้ำหนัก"
   - ป้อนน้ำหนักปัจจุบันและอายุครรภ์

6. ดูการนัดหมาย:
   - ไปที่เมนู "การนัดหมาย"
   - ดูรายละเอียดการนัดหมายที่กำลังจะมาถึง

7. ดูข้อมูลสรุป:
   - หน้าแดชบอร์ดจะแสดงข้อมูลสรุป เช่น ค่าน้ำตาลวันนี้, น้ำหนักล่าสุด, การนัดหมายที่กำลังจะมาถึง
   - ดูกราฟแนวโน้มค่าน้ำตาลย้อนหลัง

## การแก้ไขปัญหาเบื้องต้น

1. **ไม่สามารถเข้าสู่ระบบ**
   - ตรวจสอบว่าป้อนเลขประจำตัวผู้ป่วยและรหัสผ่านถูกต้อง
   - ตรวจสอบการเชื่อมต่ออินเทอร์เน็ต
   - หากลืมรหัสผ่าน ให้ติดต่อพยาบาลหรือผู้ดูแลระบบ

2. **ไม่สามารถบันทึกข้อมูล**
   - ตรวจสอบว่าป้อนข้อมูลครบถ้วน
   - รีเฟรชหน้าและลองใหม่อีกครั้ง
   - ตรวจสอบว่ายังล็อกอินอยู่

3. **กราฟไม่แสดงผล**
   - อาจเกิดจากข้อมูลไม่เพียงพอ (ต้องมีการบันทึกอย่างน้อย 1 รายการ)
   - รีเฟรชหน้าและลองใหม่อีกครั้ง

4. **แอปพลิเคชันทำงานช้า**
   - ล้างแคชของเบราว์เซอร์
   - ตรวจสอบความเร็วอินเทอร์เน็ต
   - ลองใช้เบราว์เซอร์อื่น (แนะนำให้ใช้ Chrome หรือ Firefox เวอร์ชันล่าสุด)

5. **ปัญหาเกี่ยวกับเซิร์ฟเวอร์**
   - ตรวจสอบล็อกของ Nginx: `sudo tail -f /var/log/nginx/error.log`
   - ตรวจสอบล็อกของแอปพลิเคชัน: `pm2 logs gdm-backend`
   - รีสตาร์ทเซิร์ฟเวอร์หากจำเป็น: `pm2 restart gdm-backend`

## ข้อมูลการติดต่อและการสนับสนุน

หากพบปัญหาในการใช้งานหรือต้องการความช่วยเหลือเพิ่มเติม สามารถติดต่อได้ที่:

- อีเมล: support@gdmapp.devapp.cc
- โทรศัพท์: 02-123-4567
- ช่องทางออนไลน์: www.gdmapp.devapp.cc/contact

ทีมงานพร้อมให้บริการในวันจันทร์-ศุกร์ เวลา 08:30-17:30 น.